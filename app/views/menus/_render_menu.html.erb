<% @menus.each do |m| %>
  <div class="card px-0 m-3" style="min-width: 300px;" >
    <div class="card-header d-flex px-3 justify-content-between align-center" style="background-color: #8EB3CD;">
      <h5 class=" d-block card-title mt-2 text-white"><%= m.date %></h5>
      <span class="d-flex">
         <%= button_to "❌", m, method: :delete, class:"btn px-1"%>
         <%= link_to "⚙", edit_menu_path(m[:id]), class:"btn px-1"%>
      </span>
    </div>
    <div class="card-body justify-content-between">
      <div class=" gap-2" >
        <% acc = [] %>
        <% total = 0 %>

        <% m.dishes.reject!(&:empty?).each do |idx| %>
          <% acc << @dishes.find(idx) %>
        <% end %>
        <% acc.group_by{ |dish| dish[:category_id]}.each  do |key, val| %>
          <ul class="list-group">
            <span class="fw-bold text-center mb-2">  <%= @categories.find(key).category %> </span>
            <% val.each do |dish| %>
              <li class="list-group-item d-flex justify-content-between" >
              <%= dish[:name] %>
                <span>
                  <% total += dish[:price] %>
                  <%= render_dish_type(dish[:price_type])  %>  /  <%= dish[:price] %>
                </span>
              </li>
            <% end %>
          </ul>
        <% end %>
      </div>
    </div>
    <div class="card-footer text-muted d-flex justify-content-end">
       <span class="mx-2 text-right"> <b>Total:</b>  <%= total %></span>
    </div>
  </div>

<% end %>




<!--[nil, [#<Dish id: 1, name: "Margarita", category_id: 1, price_type: "By Item", price: 222, created_at: "2022-07-12 17:39:26", updated_at: "2022-07-12 17:39:26">]]-->