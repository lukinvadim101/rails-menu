<% @menus.each do |m| %>
  <div class="card col-4 px-0 m-1 min-width-25" style="min-width: 66px;">
    <div class="card-header d-flex px-3 justify-content-between align-center">
      <h5 class=" d-block card-title mt-2 "><%= m.date %></h5>
      <span class="d-flex"><%= link_to 'ℹ️', m, class:"btn px-1" %>
         <%= button_to "❌", m, method: :delete, class:"btn px-1"%>
         <%= link_to "⚙️", edit_menu_path(m[:id]), class:"btn px-1"%>
      </span>
    </div>
    <div class="card-body justify-content-between">
      <div class=" gap-2" >

        <% acc = [] %>
        <% m.dishes.reject!(&:empty?).each do |idx| %>
          <% if !Dish.exists?(:id => idx) %>
           <% return %>
          <% end %>
          <% dish = @dishes.find(idx)%>
          <% acc << dish
          #      {
          #   category: dish.category_id,
          #   name: dish.name,
          #   price: dish.price,
          #   price_type: dish.price_type
          # }
          %>

        <% end %>

        <% acc = acc.group_by{ |d| d[:category]} %>

        <% acc.each  do |key, val| %>
          <ul class="list-group">
            <span class="fw-bold text-center my-2">  <%= @categories.find(key).category %>s </span>
            <% val.each do |dish| %>
              <li class="list-group-item d-flex justify-content-between" >
                <%= dish[:name] %>
                <span>
                  <%= render_dish_type(dish[:price])  %>  /  <%= dish[:price] %>
                </span>
              </li>
            <% end %>
          </ul>
        <% end %>
      </div>
    </div>
  </div>

<% end %>